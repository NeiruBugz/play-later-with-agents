# Project: Play Later

This is a monorepo for the "Play Later" web application, designed to help users manage their game backlogs, track collections, and interact with game reviews.

## Project Overview

The project is structured as a monorepo, managed with `pnpm` workspaces, and comprises the following main components:

*   **`web/` (Frontend):** A React application built with Vite, utilizing TanStack Router for routing, and `shadcn/ui` for UI components. It's written in TypeScript and uses ESLint for code quality.
*   **`api/` (Backend):** A FastAPI application written in Python, serving as the backend API. It uses `poetry` for dependency management and `ruff` for code formatting.
*   **`contract/`:** This directory is intended to hold the OpenAPI schema (`openapi.json`) generated by the FastAPI backend. This schema is then used to generate a type-safe API client for the frontend.
*   **`infra/`:** Contains Terraform configurations for managing the AWS infrastructure.

## Building and Running

To set up and run the project, follow these steps:

1.  **Install pnpm:** If you don't have pnpm installed, you can install it globally:
    ```bash
    npm install -g pnpm
    ```

2.  **Install Monorepo Dependencies:**
    Navigate to the root of the project and install all dependencies for the monorepo:
    ```bash
    pnpm install
    ```

3.  **Set up Python Virtual Environment and Dependencies (Backend):**
    Navigate to the `api` directory, create a virtual environment, and install Python dependencies using `poetry`:
    ```bash
    cd api
    python3 -m venv .venv
    source .venv/bin/activate
    poetry install --no-root
    cd ..
    ```

4.  **Generate API Client (Frontend):**
    The frontend consumes an API client generated from the OpenAPI schema.
    ```bash
    pnpm --filter web gen:api
    ```
    *(Note: The `openapi.json` file in `contract/` is currently a placeholder. You will need to generate the actual schema from the FastAPI application once it's developed.)*

5.  **Run the Frontend Application:**
    ```bash
    pnpm --filter web dev
    ```
    The frontend application will typically run on `http://localhost:3000`.

6.  **Run the Backend Application:**
    ```bash
    cd api
    source .venv/bin/activate
    uvicorn main:app --reload
    ```
    The backend API will typically run on `http://localhost:8000`.

## Development Conventions

*   **Conventional Commits:** The project enforces Conventional Commits for clear and consistent commit messages. This is validated by `commitlint` via a `lefthook` pre-commit hook.
*   **Pre-commit Hooks:** `lefthook` is used to run automated checks before each commit:
    *   **Frontend Linting:** `pnpm --filter web lint` (ESLint for TypeScript/React code).
    *   **Backend Formatting:** `source api/.venv/bin/activate && cd api && poetry run ruff format` (Ruff for Python code).
    *   **Infrastructure Formatting:** `terraform fmt -recursive infra` (Terraform formatter).
*   **Monorepo Management:** `pnpm` workspaces are used to manage dependencies and scripts across the different applications and packages within the monorepo.

## Next Steps

*   Implement the actual API endpoints in the FastAPI backend and configure it to generate the `openapi.json` schema.
*   Start building out the UI components and features in the `web` application.
*   Develop the Terraform configurations for your AWS infrastructure.
